作者：zhang_yu
日期：2001-2-27 15:07:06
建立你的第一个标签
以下的进阶指南将介绍如何把JSP扩展为具有自己的HTML编码功能。这种编码方法用<和 >符号代替HTML代码，而且很容易经过扩展以执行其他编码操作。整个示例虽然简单，但它确实向你说明了定制标签的最基础要素。

创建JavaBean
代码中的任何可重用部分都应该包含在JavaBean内。这一点是很重要的。这样你就可以在其他项目中重用这些代码了。由于任何放置在标签处理器内的代码都不会在标签以外被重用，所以代码的重用部分要与之分离。在我们的示例中，HTML编码逻辑很一般，所以我们直接把他们放在了JavaBean内，请参看清单B。

创建标签处理器
标签处理器使用了清单C的代码。

这些代码很简单，其中包括：

读取包含在打开和关闭标签内的文本。 
调用HTML编码函数。 
将结果返回给JSP页面。 
创建标签描述符
我们需要描述自己的标签以便系统知道他们到底具有什么含义。TLD文件通常就以标签处理器命名并被存放在"/WEB-INF/"目录之下。该文件的文件扩展名是.tld。请参看清单D。

更新Web XML文件
现在你就可以告诉JSP容器使用标签库了。为此你需要修改web.xml文件：增加一个taglib项以注册标签库并为标签分配一个URI。URI是Web站点上唯一应用于这一特定标签的索引。由于标签今后还可能用在不同的Web站点上，所以你最好采用完整的URL和/或者包名字（package name）来保证这一唯一性。示例代码请参看清单E。
